<!DOCTYPE html>
<html>
  <head>
    <title>D3 Sample</title>
  </head>
  <body>
    <h1>D3 Sample</h1>
    <h2>DIV Chart</h2>
    <div id="div-chart" ></div>
    <h2>SVG Chart</h2>
    <svg id="svg-chart"></svg>
    <script src="/components/d3/d3.min.js"></script>
    <script>
        // draw div chart
        (function() {
        	var data = [4, 8, 15, 16, 23, 42];
        	var chart = d3.select('#div-chart');
        	chart.selectAll('div')
        		.data(data)
        		.enter()
        		.append('div')
        		.style('background-color', 'cyan')
        		.style('border', 'solid 1px')
        		.style('margin', '1px')
        		.style('width', function(d) {return 10 * d; })
        		.style('text-align', 'center')
        		.text(function(d) {return d;});
        })();

        // draw svg chart
        (function() {
            var barHeight = 20;
            var width = 420;
            function type(d) {
                d.value = +d.value;
                return d;
            }

            d3.tsv('data.tsv', type, function(error, data) {
                var x = d3.scale.linear().domain([0, d3.max(data, function(d) {return d.value;})]).range([0, width]);
                var chart = d3.select('#svg-chart');
                chart.attr('height', data.length * barHeight).attr('width', width);
                var bars = chart.selectAll('g')
                    .data(data)
                    .enter()
                    .append('g')
                    .attr('transform', function(d, i) { return 'translate(0, ' + i * barHeight + ')'; });
                bars.append('rect')
                    .attr('height', barHeight - 1)
                    .attr('width', function(d) { return x(d.value);})
                    .attr('fill', 'steelblue');

                bars.append('text')
                    .attr('fill', 'white')
                    .attr('x', function(d) { return x(d.value) - 3;})
                    .attr('y', barHeight / 2)
                    .attr('dy', '.35em')
                    .attr('text-anchor', 'end')
                    .attr('font', '10px sans-serif')
                    .text(function(d) { return d.value; })

            });
        })();
    </script>
  </body>
</html>
